# ğŸ” Beonttuek

### â€œí•˜ë£¨ì˜ ì‹œì‘ì„ ë²ˆëœ©ì´ê²Œâ€
- ë²ˆëœ©(Beontteuk)ì€ ì‚¬ìš©ìì—ê²Œ í•„ìš”í•œ ë‹¤ì–‘í•œ ì‹œê°„ ê¸°ëŠ¥(ì•ŒëŒ, íƒ€ì´ë¨¸, ìŠ¤í†±ì›Œì¹˜, ì„¸ê³„ì‹œê³„)ì„ ì œê³µí•˜ëŠ” ì˜¬ì¸ì› ì‹œê°„ ê´€ë¦¬ ì•±ì…ë‹ˆë‹¤.
  - ì•ŒëŒ: ì‹œê°„, ë ˆì´ë¸” ê¸°ëŠ¥ì„ ì œê³µí•˜ë©° ì§ê´€ì ì¸ í¸ì§‘ UX êµ¬ì„±
  - ìŠ¤í†±ì›Œì¹˜: ë©íƒ€ì„ ì €ì¥ ë° ì¬ì‹œì‘ ê¸°ëŠ¥ í¬í•¨, ì•± ì¢…ë£Œ í›„ì—ë„ ìƒíƒœ ë³µêµ¬ ê°€ëŠ¥
  - íƒ€ì´ë¨¸: ë‚¨ì€ ì‹œê°„ ë° ì „ì²´ ì‹œê°„ ê¸°ë°˜ì˜ êµ¬ì¡° ì„¤ê³„, ìµœê·¼ íƒ€ì´ë¨¸ ê¸°ë¡ ì €ì¥
  - ì„¸ê³„ì‹œê³„: ë„ì‹œ ê°„ ì‹œê°„ì°¨, ë‚ ì§œ êµ¬ë¶„(ì–´ì œ/ì˜¤ëŠ˜/ë‚´ì¼) ë° 12/24ì‹œê°„ì œ ë°˜ì˜

---

## ğŸ“¸ í™”ë©´ ë¯¸ë¦¬ë³´ê¸° [ì˜ìƒ](https://www.youtube.com/shorts/52VOri7DYiE)

<p align="center">
  <img src="https://github.com/user-attachments/assets/bc55aed7-b0f5-45f4-addd-bd1a5c5379fc"/>
</p>

---

## ğŸ—“ í”„ë¡œì íŠ¸ ì¼ì •

- **ì‹œì‘ì¼:** 2025ë…„ 5ì›” 20ì¼
- **ì¢…ë£Œì¼:** 2025ë…„ 5ì›” 28ì¼

---

## ğŸ“‚ í´ë” êµ¬ì¡°
```
 Beontteuk  
 â”œâ”€â”€ .gitignore  
 â”œâ”€â”€ Beontteuk.xcodeproj  
 â”œâ”€â”€ Beontteuk  
 â”‚   â”œâ”€â”€ App                                 # ì•± ì „ì—­ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì„¤ì • ê´€ë ¨ ë””ë ‰í† ë¦¬
 â”‚   â”‚   â”œâ”€â”€ DIContainer  
 â”‚   â”‚   â”œâ”€â”€ Data                            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì¤‘ì‹¬ì´ ë˜ëŠ” ê³„ì¸µ, ì™¸ë¶€ì™€ì˜ ì˜ì¡´ì´ ì—†ëŠ” ìˆœìˆ˜ ë¡œì§ ì •ì˜
 â”‚   â”‚   â”‚   â”œâ”€â”€ CoreData  
 â”‚   â”‚   â”‚   â””â”€â”€ Entity  
 â”‚   â”‚   â”‚       â”œâ”€â”€ CDAlarm  
 â”‚   â”‚   â”‚       â”œâ”€â”€ CDTimer  
 â”‚   â”‚   â”‚       â”œâ”€â”€ LapRecord  
 â”‚   â”‚   â”‚       â”œâ”€â”€ StopWatchSession  
 â”‚   â”‚   â”‚       â””â”€â”€ WorldClock  
 â”‚   â”‚   â””â”€â”€ Repository  
 â”‚   â”‚       â”œâ”€â”€ Implementation  
 â”‚   â”‚       â””â”€â”€ Interface  
 â”‚   â”œâ”€â”€ Domain                              # ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ì™€ì˜ ì—°ê²° ë° êµ¬ì²´ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ ë‹´ë‹¹
 â”‚   â”‚   â”œâ”€â”€ Entity  
 â”‚   â”‚   â”œâ”€â”€ Repository  
 â”‚   â”‚   â”‚   â””â”€â”€ Interface  
 â”‚   â”‚   â”œâ”€â”€ UseCase  
 â”‚   â”‚   â”‚   â”œâ”€â”€ Implementation  
 â”‚   â”‚   â”‚   â””â”€â”€ Interface  
 â”‚   â”œâ”€â”€ Presentation                        # UIì™€ ê´€ë ¨ëœ ë¡œì§ì„ ê´€ë¦¬í•˜ëŠ” ê³„ì¸µ
 â”‚   â”‚   â”œâ”€â”€ DIContainerInterface  
 â”‚   â”‚   â”œâ”€â”€ Alarm  
 â”‚   â”‚   â”‚   â”œâ”€â”€ BottomSheetView  
 â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Call  
 â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Model  
 â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ View  
 â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ViewModel  
 â”‚   â”‚   â”‚   â”œâ”€â”€ Cell  
 â”‚   â”‚   â”‚   â”œâ”€â”€ View  
 â”‚   â”‚   â”‚   â””â”€â”€ ViewModel  
 â”‚   â”‚   â”œâ”€â”€ StopWatch  
 â”‚   â”‚   â”‚   â”œâ”€â”€ Model  
 â”‚   â”‚   â”‚   â”œâ”€â”€ View  
 â”‚   â”‚   â”‚   â””â”€â”€ ViewModel  
 â”‚   â”‚   â”œâ”€â”€ TabBar  
 â”‚   â”‚   â”‚   â””â”€â”€ View  
 â”‚   â”‚   â”œâ”€â”€ Timer  
 â”‚   â”‚   â”‚   â”œâ”€â”€ Model  
 â”‚   â”‚   â”‚   â”œâ”€â”€ View  
 â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Subview  
 â”‚   â”‚   â”‚   â””â”€â”€ ViewModel  
 â”‚   â”‚   â””â”€â”€ WorldClock  
 â”‚   â”‚       â”œâ”€â”€ Cell   
 â”‚   â”‚       â”œâ”€â”€ View  
 â”‚   â”‚       â””â”€â”€ ViewModel
 â”‚   â””â”€â”€ Shared  
 â”‚       â”œâ”€â”€ Base  
 â”‚       â”œâ”€â”€ Extension  
 â”‚       â”œâ”€â”€ NotificationService  
 â”‚       â””â”€â”€ ViewComponent
 â”œâ”€â”€ Resources                                # í”„ë¡œì íŠ¸ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë””ë ‰í† ë¦¬
 â”œâ”€â”€ BeontteukTests  
 â”œâ”€â”€ BeontteukUITests  
 â””â”€â”€ Frameworks  
```

---

## ğŸ›  ì‚¬ìš© ê¸°ìˆ 

- **Swift 5**
- **UIKit**
- **CoreData**
- **MVVM Pattern**
- **Clean Architecture**
- **RxSwift & RxCocoa & RxDataSources**
- **SnapKit**
- **Then**
- **DI & DIP**
- **SwiftUI**
- **ActivityKit**

---

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥
- **ê³µí†µ**
  - ì‚¬ìš©ì ê²½í—˜ì„ ê³ ë ¤í•œ ì§€ì†ì  ìƒíƒœ ìœ ì§€ ê¸°ëŠ¥ êµ¬í˜„
- **ì•ŒëŒ**
  - 24ì‹œê°„ì œ / 12ì‹œê°„ì œ UI ì œê³µ
  - ì‹œê°„, ë¶„, ë ˆì´ë¸”(ì—†ì€ ê²¨ìš° ì•ŒëŒ ì €ì¥), ë‹¤ì‹œ ì•Œë¦¼(í˜„ì¬ 1ë¶„ ë’¤) ê¸°ëŠ¥ ì œê³µ
  - ì•ŒëŒ ìŠ¤ì™€ì´í”„ë¡œ ì‚­ì œ ë° ì¢Œì¸¡ ìƒë‹¨ ë²„íŠ¼ìœ¼ë¡œ ì•ŒëŒ ì‚­ì œ ê¸°ëŠ¥ ì œê³µ
  - í† ê¸€ì„ í†µí•œ ì•ŒëŒ on/off ì œê³µ
  - ì €ì¥ëœ ì•ŒëŒ ì„ íƒ ì‹œ í¸ì§‘ ê¸°ëŠ¥ ì œê³µ
  - í™œì„±í™”ëœ ì•ŒëŒ ìœ ë¬´ì— ë”°ë¥¸ ìƒë‹¨ ì´ë¯¸ì§€, í…ìŠ¤íŠ¸ ë³€ê²½ UX ì œê³µ
- **ìŠ¤í†±ì›Œì¹˜**
  - ìŠ¤í†±ì›Œì¹˜ ì‹œì‘, ì¼ì‹œì •ì§€, ë© ê¸°ë¡, ì´ˆê¸°í™” ê¸°ëŠ¥ ì œê³µ
  - ë© ë²„íŠ¼ì„ íƒ­í•˜ë©´ ê° ë© ê°„ ê²½ê³¼ ì‹œê°„ê³¼ í•´ë‹¹ ë©ê¹Œì§€ì˜ ëˆ„ì  ì‹œê°„ì„ í•¨ê»˜ ê¸°ë¡
  - ì•± ì¬ì‹¤í–‰ ì‹œ ë§ˆì§€ë§‰ ì‹¤í–‰ ì‹œì ì˜ ëˆ„ì  ì‹œê°„, ë© ê¸°ë¡ì„ ìë™ìœ¼ë¡œ ë³µì›
- **íƒ€ì´ë¨¸**
  - ì‹œê°„ì„ ì„ íƒí•˜ì—¬ íƒ€ì´ë¨¸ ì¶”ê°€, 0ì´ˆ ì„¤ì • ì‹œ ì‹œì‘ ë¹„í™œì„±í™”
  - ìµœê·¼ ì‚¬ìš©í•œ íƒ€ì´ë¨¸ ì¶”ê°€ ì‹œ ì¤‘ë³µ ì‹œê°„ ì¶”ê°€ ë°©ì§€
  - ìµœê·¼ í•­ëª©ìœ¼ë¡œë¶€í„° íƒ€ì´ë¨¸ ì¶”ê°€ ê¸°ëŠ¥
  - íƒ€ì´ë¨¸ ì¼ì‹œì •ì§€, ì¬ê°œ ê¸°ëŠ¥
  - ë‚¨ì€ ì‹œê°„ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¸ë””ì¼€ì´í„° ì œê³µ
  - ì¢Œì¸¡ ìƒë‹¨ ë²„íŠ¼ì„ í†µí•œ í¸ì§‘ ê¸°ëŠ¥
  - íƒ€ì´ë¨¸ ì¢…ë£Œ ì‹œ í¬ê·¸ë¼ìš´ë“œ/ë°±ê·¸ë¼ìš´ë“œì—ì„œ í‘¸ì‹œ ì•Œë¦¼ ì œê³µ
  - ì•Œë¦¼ì„¼í„° ë° ì ê¸ˆí™”ë©´ì—ì„œ ì‹¤í–‰ì¤‘ì¸ íƒ€ì´ë¨¸ì— ëŒ€í•œ Live Activity ì œê³µ
- **ì„¸ê³„ì‹œê°„**
  - ì„¸ê³„ ì‹œê°„ íƒ­ì—ì„œ ì¶”ê°€ëœ ë„ì‹œì˜ í˜„ì§€ ì‹œê°„ í™•ì¸ ê°€ëŠ¥
  - ë„ì‹œ ì¶”ê°€ ë²„íŠ¼ì„ í†µí•´ ì„¸ê³„ ë„ì‹œ ì¶”ê°€ ê°€ëŠ¥
  - ê²€ìƒ‰ì°½ì„ í†µí•´ ë„ì‹œ ê²€ìƒ‰ ê°€ëŠ¥
  - ë‹¨ì¼ ë„ì‹œ ì‚­ì œ ê¸°ëŠ¥ ì œê³µ
  - ì¢Œì¸¡ ìƒë‹¨ì˜ í¸ì§‘ ë²„íŠ¼ìœ¼ë¡œ ë„ì‹œ ì‚­ì œ ë° ì •ë ¬ ê¸°ëŠ¥ ì œê³µ
  - ì•± ì‚¬ìš© ê¸°ê¸°ì˜ 12/24ì‹œê°„ì œ ì„¤ì •ì— ë”°ë¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì„¸ê³„ ì‹œê³„ íƒ­ì—ë„ ì ìš©
  - ë¶„ ë‹¨ìœ„ ì‹œê°„ ì—…ë°ì´íŠ¸
---

## ğŸ§© Trouble Shooting

### ë°±ë˜í›ˆ
- **ë¬¸ì œ**
  - ì•±ì´ foregroundë¡œ ì§„ì…í•˜ê±°ë‚˜ viewWillAppear ì‹œì ì—ì„œ 12/24ì‹œê°„ì œ ë˜ëŠ” 1ë¶„ ë‹¨ìœ„ ì‹œê°„ì´ ë³€í–ˆìŒì—ë„ í…Œì´ë¸” ë·°ì˜ ì‹œê° ì •ë³´ê°€ ê°±ì‹ ë˜ì§€ ì•ŠìŒ
- **ì›ì¸**
  - ì´ˆê¸°ì— RxCocoaì˜ `.bind(to:)` ë°©ì‹ìœ¼ë¡œ ë‹¨ì¼ ì„¹ì…˜ì„ êµ¬ì„±í•˜ì—¬ ë™ì‘ì—ëŠ” ë¬¸ì œê°€ ì—†ì—ˆìŒ
  - í•˜ì§€ë§Œ ì‚­ì œ/ì •ë ¬ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ RxDataSourcesë¡œ ì „í™˜
  - RxDataSourcesëŠ” ë‚´ë¶€ì ìœ¼ë¡œ `==` ì—°ì‚°ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ diffë¥¼ ê³„ì‚°í•¨
  - `WorldClockEntity`ì—ì„œ idì™€ `isEditing`ë§Œì„ ê¸°ì¤€ìœ¼ë¡œ ë¹„êµí•˜ë˜ `==` ì—°ì‚°ìì—ì„œëŠ” ì‹œê° ì •ë³´ì¸ `hourMinuteString`, `amPmString`ì˜ ë³€í™”ëŠ” ì…€ ë³€í™”ë¡œ ì¸ì‹ë˜ì§€ ì•ŠìŒ
    - â†’ ê·¸ ê²°ê³¼ `configureCell()`ì´ í˜¸ì¶œë˜ì§€ ì•Šì•„ ì…€ ë‚´ìš©ì´ ê°±ì‹ ë˜ì§€ ì•ŠìŒ
- **í•´ê²°**
  - `WorldClockEntity`ì˜ `==` ì—°ì‚°ì êµ¬í˜„ì„ ìˆ˜ì •í•˜ì—¬ ë¹„êµ ê¸°ì¤€ì— `hourMinuteString`, `amPmString`ë„ í¬í•¨ì‹œí‚´
    - â†’ ì…€ì˜ ì‹œê°„ ì‹œê°ì´ ë³€í•  ê²½ìš°ì—ë„ RxDataSourcesê°€ ì…€ì„ ê°±ì‹  ëŒ€ìƒìœ¼ë¡œ íŒë‹¨
    - â†’ ì‹œê° ì •ë³´ ë° 12/24ì‹œê°„ì œê°€ ì •ìƒì ìœ¼ë¡œ ë¶„ ë‹¨ìœ„ë¡œ ì‹¤ì‹œê°„ ë°˜ì˜ë¨ì„ í™•ì¸í•¨

```swift
struct WorldClockEntity: Equatable, Identifiable {
    let id: UUID?
    let cityName: String?
    let cityNameKR: String?
    let timeZoneIdentifier: String?
    let createdAt: Date?
    let orderIndex: Int16
    let hourMinuteString: String
    let amPmString: String?
    let hourDifferenceText: String
    let dayLabelText: String
    var isEditing: Bool
}

extension WorldClockEntity: IdentifiableType {
    var identity: String { return id?.uuidString ?? UUID().uuidString }

    static func == (lhs: WorldClockEntity, rhs: WorldClockEntity) -> Bool {
        return lhs.id == rhs.id &&
               lhs.isEditing == rhs.isEditing &&
               lhs.hourMinuteString == rhs.hourMinuteString &&
               lhs.amPmString == rhs.amPmString
    }
}

typealias WorldClockSection = AnimatableSectionModel<String, WorldClockEntity>
```


### ê³½ë‹¤ì€
- **ë¬¸ì œ**
   - ì—¬ëŸ¬ íƒ€ì´ë¨¸ ë™ì‹œ ì‹¤í–‰ ì‹œ ë‚¨ì€ ì‹œê°„ì´ ì¼ê´„ ê°±ì‹ ë˜ì–´ UIê°€ ë¶€ìì—°ìŠ¤ëŸ¬ì›€
- **ì›ì¸**
  - íƒ€ì´ë¨¸ ViewModelì´ ë‹¨ì¼ RxTimerë¥¼ ê³µìœ í•˜ë©° ëª¨ë“  íƒ€ì´ë¨¸ê°€ ë™ì¼ ì‹œê°„ íë¦„ìœ¼ë¡œ ì‘ë™í•¨
- **í•´ê²°**
  - íƒ€ì´ë¨¸ë§ˆë‹¤ ê³ ìœ ì˜ RxTimerë¥¼ ìƒì„±í•˜ê³ , ê° íƒ€ì´ë¨¸ì— ì „ìš© disposeBagì„ í• ë‹¹í•´ ê°œë³„ì ìœ¼ë¡œ êµ¬ë…ì„ ê´€ë¦¬í•¨
  - íƒ€ì´ë¨¸ê°€ ì¢…ë£Œë˜ë©´ í•´ë‹¹ êµ¬ë…ë„ ìë™ìœ¼ë¡œ í•´ì œë˜ì–´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
  - ê° íƒ€ì´ë¨¸ëŠ” 1ì´ˆë§ˆë‹¤ ê°œë³„ì ìœ¼ë¡œ ticker(PublishRelay)ë¥¼ í†µí•´ UI ì—…ë°ì´íŠ¸ë¥¼ íŠ¸ë¦¬ê±°í•¨
  - UITableViewì˜ ë³´ì´ëŠ” ì…€ë§Œ ì—…ë°ì´íŠ¸í•˜ì—¬ ë¶ˆí•„ìš”í•œ ìŠ¤ëƒ…ìƒ· ì—°ì‚°ì„ ì¤„ì´ê³  ì„±ëŠ¥ì„ ìµœì í™”í•¨
- **ì½”ë“œ**
  - ViewModel
  ```swift
  private func startTicking(timer: ActiveTimer) {
      guard let id = timer.id else { return }
  
      let timer = Observable<Int>.interval(.seconds(1), scheduler: MainScheduler.instance)
          .filter { _ in timer.isRunning }
          .asDriver(onErrorDriveWith: .empty())
          .drive(with: self) { owner, _ in
              if timer.isExpired {
                  guard let row = owner.state.activeTimers.value
                      .map({ $0.active! }).firstIndex(of: timer) else { return }
                  owner.deleteTimer(for: IndexPath(row: row, section: 0))
              } else {
                  owner.state.tick.accept(())
                  LiveActivityManager.shared.update(for: id, remainTime: timer.remainTime)
              }
          }
  
      timerBag[id] = timer
  }
  ```

  - ViewController
  ```swift
  viewModel.state.tick
      .asDriver(onErrorDriveWith: .empty())
      .drive(with: self) { owner, _ in
          owner.timerView.updateVisibleTimerCells()
      }
      .disposed(by: disposeBag)
  ```

  - View
  ```swift
  func updateVisibleTimerCells() {
      let visibleIndexPaths = tableView.indexPathsForVisibleRows ?? []
  
      for indexPath in visibleIndexPaths {
          guard let item = dataSource?.itemIdentifier(for: indexPath),
                let cell = tableView.cellForRow(at: indexPath) as? TimerActiveCell,
                let timer = item.active else { continue }
  
          cell.configureCell(
              time: timer.timeString,
              timeKR: timer.localizedTimeString,
              progress: timer.progress
          )
          cell.updateState(to: timer.isRunning ? .running : .pause)
      }
  }
  ```

### ì†í•˜ê²½
- **ë¬¸ì œ**
   - Action-State íŒ¨í„´ ì‚¬ìš© ì¤‘ actionì´ ë‘ ë²ˆ í˜¸ì¶œë˜ëŠ” í˜„ìƒ ë°œìƒ
- **ì›ì¸**
  - ê³µí†µ ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ viewDidLoadì— bindViewModel()ì„ ì´ë¯¸ í˜¸ì¶œ ì¤‘ì´ì—ˆìœ¼ë‚˜, í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ë¶ˆí•„ìš”í•˜ê²Œ ì¤‘ë³µ ì˜¤ë²„ë¼ì´ë“œ í•¨
- **í•´ê²°**
  - ìƒì†ë°›ì€ í´ë˜ìŠ¤ì˜ viewDidLoadì—ì„œ ì‘ì„±í•œ bindViewModel()ì„ ì œê±°í•˜ì—¬ ì¤‘ë³µ í˜¸ì¶œ ë¬¸ì œ í•´ê²°

  ```swift
  final class StopWatchViewController: BaseViewController {
    // ...
    override func viewDidLoad() {
      super.viewDidLoad()
      setDataSource()
      viewModel.action.viewDidLoad.accept(())
    }
    // ...
  }
  
  // BaseViewController
  class BaseViewController: UIViewController {
    // ...
    override func viewDidLoad() {
      super.viewDidLoad()
      self.view.applyGradient()
      bindViewModel()
      setStyles()
      setLayout()
      setDelegates()
      setRegister()
    }
    // ...
  }
  ```

### ì´ì„¸ì¤€
- **ë¬¸ì œ**
   - ì•ŒëŒ Notificatoinì—ì„œ ê¸¸ê²Œ ì†Œë¦¬ê°€ ì¬ìƒë˜ì§€ ì•ŠëŠ” í˜„ìƒ (Notificationì—ë‹¤ê°€ ì•ŒëŒ ì†Œë¦¬ë¥¼ ë„£ê²Œ ë˜ë©´ 6ì´ˆ ê°€ëŸ‰ ì†Œë¦¬ë§Œ ë‚¨)
- **ì›ì¸**
  - ê³µì‹ ë¬¸ì„œìƒ 30ì´ˆ ë‚´ì˜ ìŒì› íŒŒì¼ì„ ì¬ìƒì´ ê°€ëŠ¥í•˜ë‹¤ë¼ê³  ë‚˜ì™€ ìˆì§€ë§Œ, ì•Œë¦¼ì´ ë– ìˆëŠ” ì‹œê°„ ë™ì•ˆë§Œ ì†Œë¦¬ê°€ ë°œìƒ
  - ì•ŒëŒ ì†ì„±ì€ ê°œë°œë‹¨ì´ ì•„ë‹Œ ì‚¬ìš©ì ì…ì¥ì—ì„œ ì„¤ì •í•´ì•¼í•˜ê¸° ë–„ë¬¸ì— ì‚¬ìš©ì ì˜ì¡´ì„± í•„ìš”
- **í•´ê²°**
  - UNUserNotificationCenterDelegateì—ì„œ ì•„ë˜ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê³  foregroundì—ì„œì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë•Œ AVPlayerë¡œ ìŒì› ë¬´í•œ ë£¨í”„ ì‹¤í–‰

  ```swift
    func userNotificationCenter(
    _ center: UNUserNotificationCenter,
    willPresent notification: UNNotification,
    withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void
    ) 
  ```

  ```swift
      do {
            audioPlayer = try AVAudioPlayer(contentsOf: url)
            audioPlayer?.numberOfLoops = -1 // ë¬´í•œë£¨í”„
            audioPlayer?.play()
        } catch {
            print("[NotificationService] AudioPlayer error: \(error)")
        }
  ```

  ë˜í•œ í•´ë‹¹ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ backgroundì—ì„œëŠ” ì†Œë¦¬ê°€ ì¬ìƒë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.
  ë•Œë¬¸ì— í•´ë‹¹ Notificationì„ ë°›ì„ë•Œ AVPlayerë¥¼ ì¬ìƒí•´ì•¼ í•˜ëŠ” ë°©ì‹ì„ ê³ ë ¤ì¤‘ì…ë‹ˆë‹¤.

---

## ğŸ“ ê³µìœ í•˜ê³  ì‹¶ì€ ê°œë°œ ë‚´ìš©
### ë°±ë˜í›ˆ
#### âœ… 12/24ì‹œê°„ì œ ìë™ ë°˜ì˜
- `DateFormatter.dateFormat(fromTemplate:)`ë¥¼ í™œìš©í•´ì„œ ì‚¬ìš©ì ê¸°ê¸° ì„¤ì •ì— ë”°ë¼ ì‹œê°„ í¬ë§· ìë™ ì „í™˜
- ì•±ì´ background â†’ foregroundë¡œ ì§„ì…í–ˆì„ ë•Œë„ NotificationCenter + Rx íë¦„ìœ¼ë¡œ ìë™ ì—…ë°ì´íŠ¸ ì²˜ë¦¬
- `hourMinuteString`, `amPmString`ì„ ë¶„ë¦¬í•˜ì—¬ labelì— ê°œë³„ì ìœ¼ë¡œ í‘œí˜„ (í°íŠ¸ ìŠ¤íƒ€ì¼ ë¶„ë¦¬ ê°€ëŠ¥)

```swift
private func addCustomObserver() {
    NotificationCenter.default.addObserver(
        self,
        selector: #selector(appWillEnterForeground),
        name: UIApplication.willEnterForegroundNotification,
        object: nil
    )
}

private func bindViewWillAppear() {
    worldClockViewModel.action.onNext(.viewWillAppear)
}

@objc private func appWillEnterForeground() {
    bindViewWillAppear()
}
```
```swift
private func fetchWorldClock() {
    Observable.just(useCase.fetchAll())
        .subscribe(with: self) { owner, items in
            owner.state.items.accept(items)
        }
        .disposed(by: disposeBag)
}
```

#### ğŸ” ë¶„ ë‹¨ìœ„ ì‹œê³„ ì‹¤ì‹œê°„ ê°±ì‹ 
- `Timer(fireAt:interval:)`ë¥¼ ì‚¬ìš©í•˜ì—¬ **ë‹¤ìŒ ì •ê°(ë¶„ì˜ 0ì´ˆ)**ì— ë§ì¶° íƒ€ì´ë¨¸ ì‹œì‘
- `RunLoop.main.add(timer, forMode: .common)`ìœ¼ë¡œ ë©”ì¸ ëŸ°ë£¨í”„ì— ë“±ë¡í•˜ì—¬ UI ì—…ë°ì´íŠ¸ì™€ ì¶©ëŒ ì—†ì´ ë™ì‘
- `updateClock()`ì´ í˜¸ì¶œë˜ë©´ `fetchWorldClock()` ë©”ì„œë“œë¥¼ í†µí•´ í˜„ì¬ ì‹œê°„ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜´
```swift
private func startClockTimer() {
    let now = Date()
    let intervalToNextMinute = 60 - now.timeIntervalSinceReferenceDate.truncatingRemainder(dividingBy: 60)
    let nextFullMinute = now.addingTimeInterval(intervalToNextMinute)
    timer = Timer(fireAt: nextFullMinute, interval: 60, target: self, selector: #selector(updateClock), userInfo: nil, repeats: true)
    RunLoop.main.add(timer!, forMode: .common)
}

@objc private func updateClock() {
    fetchWorldClock()
}
```

### ê³½ë‹¤ì€
#### âœ… íƒ€ì´ë¨¸ Live Activity
- ì‹¤í–‰ì¤‘ì¸ íƒ€ì´ë¨¸ë¥¼ ì•Œë¦¼ì„¼í„° ë° ì ê¸ˆ í™”ë©´ì—ì„œ ì‹¤ì‹œê°„ ì¹´ìš´íŒ…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- íƒ€ì´ë¨¸ë¥¼ ìƒì„±í•˜ì—¬ ì‹¤í–‰í•˜ê±°ë‚˜, ì¼ì‹œì •ì§€ ìƒíƒœì˜€ë˜ íƒ€ì´ë¨¸ë¥¼ ì¬ê°œí•˜ëŠ” usecase ë©”ì„œë“œì—ì„œ `start(for:endAfter)`ì„ í˜¸ì¶œí•˜ì—¬ ì‹œì‘í•©ë‹ˆë‹¤.
- íƒ€ì´ë¨¸ê°€ ì¢…ë£Œ, ì‚­ì œ ë˜ëŠ” ì¼ì‹œì •ì§€í•˜ëŠ” usecase ë©”ì„œë“œì—ì„œ `stop(for:)`ë¥¼ í˜¸ì¶œí•˜ì—¬ ë©ˆì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê° RxTimerì—ì„œ `update(for:remainTime)`ì„ í˜¸ì¶œí•˜ì—¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
- ì‘ë™ ë°©ì‹
```swift
final class LiveActivityManager: ObservableObject {
    static let shared = LiveActivityManager()

    private var activityMap: [UUID: Activity<BeontteukWidgetAttributes>] = [:]

    private init() {}

    // ...
}
```
`[UUID: Activity<CustomAttributes>]` íƒ€ì…ì¸ `activityMap`ë¡œ ì—…ë°ì´íŠ¸ ë˜ëŠ” ë©ˆì¶œ Activityë¥¼ ì°¾ì•„ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### ì´ì„¸ì¤€
#### ì•ŒëŒ ê¸°ëŠ¥ (UNUserNotificationCenter)
- ì•±ì˜ ì•Œë¦¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ , ë°˜ë³µ ì¬ìƒì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ê³µìœ í•©ë‹ˆë‹¤.
- ì‚¬ìš© ë°©ì‹
```swift
/// ì•ŒëŒ ìŠ¤ì¼€ì¤„ ìš”ì²­
    /// - Parameters:
    ///   - date: ì•ŒëŒì´ ë°œìƒí•  ì •í™•í•œ ë‚ ì§œ/ì‹œê°„
    ///   - snooze: ìŠ¤ëˆ„ì¦ˆ ì—¬ë¶€ (trueë©´ ì €ì¥ëœ ì‹œê°„ë¶€í„° 1ë¶„ ë’¤ì— ìë™ ì¬ì•Œë¦¼)
    ///   - title: ì•Œë¦¼ ì œëª©
    ///   - notificationId: ê³ ìœ  ì‹ë³„ì
    func scheduleAlarm(
        at date: Date,
        snooze: Bool,
        title: String,
        notificationId: String
    ) {
        let content = UNMutableNotificationContent()
        content.title = title
        content.categoryIdentifier = NotificationService.alarmCategoryIdentifier

        let center = UNUserNotificationCenter.current()

        // 1) ì›ë˜ ì•ŒëŒ ìŠ¤ì¼€ì¤„
        let comps = Calendar.current.dateComponents([.hour, .minute,.second], from: date)
        let originalTrigger = UNCalendarNotificationTrigger(dateMatching: comps, repeats: false)
        let originalRequest = UNNotificationRequest(
            identifier: notificationId,
            content: content,
            trigger: originalTrigger
        )
        center.removePendingNotificationRequests(withIdentifiers: [notificationId])
        center.add(originalRequest)

        // 2) ìŠ¤ëˆ„ì¦ˆ ìë™ ì¬ì•Œë¦¼ (1ë¶„ ë’¤)
        if snooze {
            let snoozeDate = date.addingTimeInterval(60)
            let snoozeComps = Calendar.current.dateComponents([.hour, .minute, .second], from: snoozeDate)
            let snoozeTrigger = UNCalendarNotificationTrigger(dateMatching: snoozeComps, repeats: false)
            let snoozeId = "\(notificationId)_snooze"
            content.title = "ë‹¤ì‹œì•Œë¦¼  \(title)"
            let snoozeRequest = UNNotificationRequest(
                identifier: snoozeId,
                content: content,
                trigger: snoozeTrigger
            )
            center.removePendingNotificationRequests(withIdentifiers: [snoozeId])
            center.add(snoozeRequest)
        }
    }

```
---
